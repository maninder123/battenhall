(function(){function t(e,t){return function(n){return n&&n.type in e?e[n.type](n):t}}function n(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+ +2*e+"z"}function r(e,t){if(e.type in i)i[e.type](e,t)}function s(e,t){r(e.geometry,t)}function o(e,t){for(var n=e.features,i=0,s=n.length;i<s;i++){r(n[i].geometry,t)}}function u(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++){t.apply(null,n[r])}}function a(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++){for(var s=n[r],o=0,u=s.length;o<u;o++){t.apply(null,s[o])}}}function f(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++){for(var s=n[r][0],o=0,u=s.length;o<u;o++){t.apply(null,s[o])}}}function l(e,t){t.apply(null,e.coordinates)}function c(e,t){for(var n=e.coordinates[0],r=0,i=n.length;r<i;r++){t.apply(null,n[r])}}function h(e){return e.source}function p(e){return e.target}function d(t,n){function g(t){var n=Math.sin(v-(t*=v))/m,r=Math.sin(t)/m,o=n*u*i+r*p*l,f=n*u*s+r*p*c,h=n*a+r*d;return[Math.atan2(f,o)/e,Math.atan2(h,Math.sqrt(o*o+f*f))/e]}var r=t[0]*e,i=Math.cos(r),s=Math.sin(r),o=t[1]*e,u=Math.cos(o),a=Math.sin(o),f=n[0]*e,l=Math.cos(f),c=Math.sin(f),h=n[1]*e,p=Math.cos(h),d=Math.sin(h),v=g.d=Math.acos(Math.max(-1,Math.min(1,a*d+u*p*Math.cos(f-r)))),m=Math.sin(v);return g}d3.geo={};var e=Math.PI/180;d3.geo.azimuthal=function(){function f(n){var o=n[0]*e-s,f=n[1]*e,l=Math.cos(o),c=Math.sin(o),h=Math.cos(f),p=Math.sin(f),d=t!=="orthographic"?a*p+u*h*l:null,v,m=t==="stereographic"?1/(1+d):t==="gnomonic"?1/d:t==="equidistant"?(v=Math.acos(d),v?v/Math.sin(v):0):t==="equalarea"?Math.sqrt(2/(1+d)):1,g=m*h*c,y=m*(a*h*l-u*p);return[r*g+i[0],r*y+i[1]]}var t="orthographic",n,r=200,i=[480,250],s,o,u,a;f.invert=function(n){var o=(n[0]-i[0])/r,f=(n[1]-i[1])/r,l=Math.sqrt(o*o+f*f),c=t==="stereographic"?2*Math.atan(l):t==="gnomonic"?Math.atan(l):t==="equidistant"?l:t==="equalarea"?2*Math.asin(.5*l):Math.asin(l),h=Math.sin(c),p=Math.cos(c);return[(s+Math.atan2(o*h,l*u*p+f*a*h))/e,Math.asin(p*a-(l?f*h*u/l:0))/e]};f.mode=function(e){if(!arguments.length)return t;t=e+"";return f};f.origin=function(t){if(!arguments.length)return n;n=t;s=n[0]*e;o=n[1]*e;u=Math.cos(o);a=Math.sin(o);return f};f.scale=function(e){if(!arguments.length)return r;r=+e;return f};f.translate=function(e){if(!arguments.length)return i;i=[+e[0],+e[1]];return f};return f.origin([0,0])};d3.geo.albers=function(){function f(t){var n=o*(e*t[0]-s),f=Math.sqrt(u-2*o*Math.sin(e*t[1]))/o;return[r*f*Math.sin(n)+i[0],r*(f*Math.cos(n)-a)+i[1]]}function l(){var r=e*n[0],i=e*n[1],l=e*t[1],c=Math.sin(r),h=Math.cos(r);s=e*t[0];o=.5*(c+Math.sin(i));u=h*h+2*o*c;a=Math.sqrt(u-2*o*Math.sin(l))/o;return f}var t=[-98,38],n=[29.5,45.5],r=1e3,i=[480,250],s,o,u,a;f.invert=function(t){var n=(t[0]-i[0])/r,f=(t[1]-i[1])/r,l=a+f,c=Math.atan2(n,l),h=Math.sqrt(n*n+l*l);return[(s+c/o)/e,Math.asin((u-h*h*o*o)/(2*o))/e]};f.origin=function(e){if(!arguments.length)return t;t=[+e[0],+e[1]];return l()};f.parallels=function(e){if(!arguments.length)return n;n=[+e[0],+e[1]];return l()};f.scale=function(e){if(!arguments.length)return r;r=+e;return f};f.translate=function(e){if(!arguments.length)return i;i=[+e[0],+e[1]];return f};return l()};d3.geo.albersUsa=function(){function i(i){var s=i[0],o=i[1];return(o>50?t:s<-140?n:o<21?r:e)(i)}var e=d3.geo.albers();var t=d3.geo.albers().origin([-160,60]).parallels([55,65]);var n=d3.geo.albers().origin([-160,20]).parallels([8,18]);var r=d3.geo.albers().origin([-60,10]).parallels([8,18]);i.scale=function(s){if(!arguments.length)return e.scale();e.scale(s);t.scale(s*.6);n.scale(s);r.scale(s*1.5);return i.translate(e.translate())};i.translate=function(s){if(!arguments.length)return e.translate();var o=e.scale()/1e3,u=s[0],a=s[1];e.translate(s);t.translate([u-400*o,a+170*o]);n.translate([u-190*o,a+200*o]);r.translate([u+580*o,a+430*o]);return i};return i.scale(e.scale())};d3.geo.bonne=function(){function u(u){var a=u[0]*e-r,f=u[1]*e-i;if(s){var l=o+s-f,c=a*Math.cos(f)/l;a=l*Math.sin(c);f=l*Math.cos(c)-o}else{a*=Math.cos(f);f*=-1}return[t*a+n[0],t*f+n[1]]}var t=200,n=[480,250],r,i,s,o;u.invert=function(i){var u=(i[0]-n[0])/t,a=(i[1]-n[1])/t;if(s){var f=o+a,l=Math.sqrt(u*u+f*f);a=o+s-l;u=r+l*Math.atan2(u,f)/Math.cos(a)}else{a*=-1;u/=Math.cos(a)}return[u/e,a/e]};u.parallel=function(t){if(!arguments.length)return s/e;o=1/Math.tan(s=t*e);return u};u.origin=function(t){if(!arguments.length)return[r/e,i/e];r=t[0]*e;i=t[1]*e;return u};u.scale=function(e){if(!arguments.length)return t;t=+e;return u};u.translate=function(e){if(!arguments.length)return n;n=[+e[0],+e[1]];return u};return u.origin([0,0]).parallel(45)};d3.geo.equirectangular=function(){function n(n){var r=n[0]/360,i=-n[1]/360;return[e*r+t[0],e*i+t[1]]}var e=500,t=[480,250];n.invert=function(n){var r=(n[0]-t[0])/e,i=(n[1]-t[1])/e;return[360*r,-360*i]};n.scale=function(t){if(!arguments.length)return e;e=+t;return n};n.translate=function(e){if(!arguments.length)return t;t=[+e[0],+e[1]];return n};return n};d3.geo.mercator=function(){function r(r){var i=r[0]/360,s=-(Math.log(Math.tan(Math.PI/4+r[1]*e/2))/e)/360;return[t*i+n[0],t*Math.max(-.5,Math.min(.5,s))+n[1]]}var t=500,n=[480,250];r.invert=function(r){var i=(r[0]-n[0])/t,s=(r[1]-n[1])/t;return[360*i,2*Math.atan(Math.exp(-360*s*e))/e-90]};r.scale=function(e){if(!arguments.length)return t;t=+e;return r};r.translate=function(e){if(!arguments.length)return n;n=[+e[0],+e[1]];return r};return r};d3.geo.path=function(){function s(t,i){if(typeof e==="function"){r=n(e.apply(this,arguments))}return u(t)||null}function o(e){return i(e).join(",")}function f(e){var t=h(e[0]),n=0,r=e.length;while(++n<r)t-=h(e[n]);return t}function l(e){var t=d3.geom.polygon(e[0].map(i)),n=t.area(),r=t.centroid(n<0?(n*=-1,1):-1),s=r[0],o=r[1],u=n,a=0,f=e.length;while(++a<f){t=d3.geom.polygon(e[a].map(i));n=t.area();r=t.centroid(n<0?(n*=-1,1):-1);s-=r[0];o-=r[1];u-=n}return[s,o,6*u]}function h(e){return Math.abs(d3.geom.polygon(e.map(i)).area())}var e=4.5,r=n(e),i=d3.geo.albersUsa();var u=t({FeatureCollection:function(e){var t=[],n=e.features,r=-1,i=n.length;while(++r<i)t.push(u(n[r].geometry));return t.join("")},Feature:function(e){return u(e.geometry)},Point:function(e){return"M"+o(e.coordinates)+r},MultiPoint:function(e){var t=[],n=e.coordinates,i=-1,s=n.length;while(++i<s)t.push("M",o(n[i]),r);return t.join("")},LineString:function(e){var t=["M"],n=e.coordinates,r=-1,i=n.length;while(++r<i)t.push(o(n[r]),"L");t.pop();return t.join("")},MultiLineString:function(e){var t=[],n=e.coordinates,r=-1,i=n.length,s,u,a;while(++r<i){s=n[r];u=-1;a=s.length;t.push("M");while(++u<a)t.push(o(s[u]),"L");t.pop()}return t.join("")},Polygon:function(e){var t=[],n=e.coordinates,r=-1,i=n.length,s,u,a;while(++r<i){s=n[r];u=-1;if((a=s.length-1)>0){t.push("M");while(++u<a)t.push(o(s[u]),"L");t[t.length-1]="Z"}}return t.join("")},MultiPolygon:function(e){var t=[],n=e.coordinates,r=-1,i=n.length,s,u,a,f,l,c;while(++r<i){s=n[r];u=-1;a=s.length;while(++u<a){f=s[u];l=-1;if((c=f.length-1)>0){t.push("M");while(++l<c)t.push(o(f[l]),"L");t[t.length-1]="Z"}}}return t.join("")},GeometryCollection:function(e){var t=[],n=e.geometries,r=-1,i=n.length;while(++r<i)t.push(u(n[r]));return t.join("")}});var a=s.area=t({FeatureCollection:function(e){var t=0,n=e.features,r=-1,i=n.length;while(++r<i)t+=a(n[r]);return t},Feature:function(e){return a(e.geometry)},Polygon:function(e){return f(e.coordinates)},MultiPolygon:function(e){var t=0,n=e.coordinates,r=-1,i=n.length;while(++r<i)t+=f(n[r]);return t},GeometryCollection:function(e){var t=0,n=e.geometries,r=-1,i=n.length;while(++r<i)t+=a(n[r]);return t}},0);var c=s.centroid=t({Feature:function(e){return c(e.geometry)},Polygon:function(e){var t=l(e.coordinates);return[t[0]/t[2],t[1]/t[2]]},MultiPolygon:function(e){var t=0,n=e.coordinates,r,i=0,s=0,o=0,u=-1,a=n.length;while(++u<a){r=l(n[u]);i+=r[0];s+=r[1];o+=r[2]}return[i/o,s/o]}});s.projection=function(e){i=e;return s};s.pointRadius=function(t){if(typeof t==="function")e=t;else{e=+t;r=n(e)}return s};return s};d3.geo.bounds=function(e){var t=Infinity,n=Infinity,i=-Infinity,s=-Infinity;r(e,function(e,r){if(e<t)t=e;if(e>i)i=e;if(r<n)n=r;if(r>s)s=r});return[[t,n],[i,s]]};var i={Feature:s,FeatureCollection:o,LineString:u,MultiLineString:a,MultiPoint:u,MultiPolygon:f,Point:l,Polygon:c};d3.geo.circle=function(){function o(){}function u(e){return s.distance(e)<i}function f(e){var t=-1,n=e.length,r=[],o,u,a,f,c;while(++t<n){c=s.distance(a=e[t]);if(c<i){if(u)r.push(d(u,a)((f-i)/(f-c)));r.push(a);o=u=null}else{u=a;if(!o&&r.length){r.push(d(r[r.length-1],u)((i-f)/(c-f)));o=u}}f=c}if(u&&r.length){c=s.distance(a=r[0]);r.push(d(u,a)((f-i)/(f-c)))}return l(r)}function l(e){var t=0,n=e.length,r,i,o=n?[e[0]]:e,u,a=s.source();while(++t<n){u=s.source(e[t-1])(e[t]).coordinates;for(r=0,i=u.length;++r<i;)o.push(u[r])}s.source(a);return o}var n=[0,0],r=90-.01,i=r*e,s=d3.geo.greatArc().target(Object);o.clip=function(e){s.source(typeof n==="function"?n.apply(this,arguments):n);return a(e)};var a=t({FeatureCollection:function(e){var t=e.features.map(a).filter(Object);return t&&(e=Object.create(e),e.features=t,e)},Feature:function(e){var t=a(e.geometry);return t&&(e=Object.create(e),e.geometry=t,e)},Point:function(e){return u(e.coordinates)&&e},MultiPoint:function(e){var t=e.coordinates.filter(u);return t.length&&{type:e.type,coordinates:t}},LineString:function(e){var t=f(e.coordinates);return t.length&&(e=Object.create(e),e.coordinates=t,e)},MultiLineString:function(e){var t=e.coordinates.map(f).filter(function(e){return e.length});return t.length&&(e=Object.create(e),e.coordinates=t,e)},Polygon:function(e){var t=e.coordinates.map(f);return t[0].length&&(e=Object.create(e),e.coordinates=t,e)},MultiPolygon:function(e){var t=e.coordinates.map(function(e){return e.map(f)}).filter(function(e){return e[0].length});return t.length&&(e=Object.create(e),e.coordinates=t,e)},GeometryCollection:function(e){var t=e.geometries.map(a).filter(Object);return t.length&&(e=Object.create(e),e.geometries=t,e)}});o.origin=function(e){if(!arguments.length)return n;n=e;return o};o.angle=function(t){if(!arguments.length)return r;i=(r=+t)*e;return o};o.precision=function(e){if(!arguments.length)return s.precision();s.precision(e);return o};return o};d3.geo.greatArc=function(){function i(){var e=typeof t==="function"?t.apply(this,arguments):t,i=typeof n==="function"?n.apply(this,arguments):n,s=d(e,i),o=r/s.d,u=0,a=[e];while((u+=o)<1)a.push(s(u));a.push(i);return{type:"LineString",coordinates:a}}var t=h,n=p,r=6*e;i.distance=function(){var e=typeof t==="function"?t.apply(this,arguments):t,r=typeof n==="function"?n.apply(this,arguments):n;return d(e,r).d};i.source=function(e){if(!arguments.length)return t;t=e;return i};i.target=function(e){if(!arguments.length)return n;n=e;return i};i.precision=function(t){if(!arguments.length)return r/e;r=t*e;return i};return i};d3.geo.greatCircle=d3.geo.circle})()